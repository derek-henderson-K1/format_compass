define("format_compass/local/editsection_form",["exports","jquery"],(function(_exports,_jquery){var obj;
/**
   * A javascript module to enhance the editsection form.
   *
   * @copyright  2023 KnowledgeOne
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.editsection_form_helper=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};_exports.editsection_form_helper=()=>{function SetCustomSectionName(){var sectionName=(0,_jquery.default)('[tag="id_sectionname"]').get(0),first_termvalue=(0,_jquery.default)("#id_sectionname_first_term").get(0).selectedOptions[0].text,first_numbervalue=(0,_jquery.default)("#id_sectionname_first_number").get(0).selectedOptions[0].text,second_termvalue=(0,_jquery.default)("#id_sectionname_second_term").get(0).selectedOptions[0].text,second_numbervalue=(0,_jquery.default)("#id_sectionname_second_number").get(0).selectedOptions[0].text,sectionname_typevalue=(0,_jquery.default)("#id_sectionname_type").val();"sectionname_freetype"!=sectionname_typevalue&&("sectionname_doubleterm_doublenumber"==sectionname_typevalue?sectionName.value=first_termvalue+" "+first_numbervalue+" - "+second_termvalue+" "+second_numbervalue:"sectionname_singleterm_doublenumber"==sectionname_typevalue?sectionName.value=first_termvalue+" "+first_numbervalue+"."+second_numbervalue:"sectionname_singleterm_singlenumber"==sectionname_typevalue&&(sectionName.value=first_termvalue+" "+first_numbervalue))}function CalculateCSVPreviewValue(){var weighttype_multiplier_csvarray=(0,_jquery.default)("#id_weighttype_multiplier_csvvalue").get(0).value.split(","),totalValue=0,breakdown="";if(_jquery.default.each(weighttype_multiplier_csvarray,(function(i,value){totalValue+=parseFloat(value),i<weighttype_multiplier_csvarray.length-1?breakdown+=value+"+":breakdown+=value})),isNaN(totalValue))totalValue="N/A";else{var result=totalValue-Math.floor(totalValue)!=0;totalValue=result?totalValue.toFixed(2)+"% ("+breakdown.replace(/\s/g,"")+")":totalValue+"% ("+breakdown.replace(/\s/g,"")+")"}return totalValue}function CalculateMultiplierPreviewValue(){var weighttype_multiplier_weightvalue=(0,_jquery.default)("#id_weighttype_multiplier_weightvalue").get(0).value,weighttype_multiplier_multipliervalue=(0,_jquery.default)("#id_weighttype_multiplier_multipliervalue").get(0).value;if(weighttype_multiplier_weightvalue&&weighttype_multiplier_multipliervalue){var totalValue=weighttype_multiplier_weightvalue*weighttype_multiplier_multipliervalue;if(isNaN(totalValue))totalValue="N/A";else totalValue-Math.floor(totalValue)!=0&&(totalValue=totalValue.toFixed(2)),totalValue+="% ("+(weighttype_multiplier_multipliervalue+" x "+weighttype_multiplier_weightvalue+"%")+")"}else totalValue="N/A";return totalValue}function SetPreviewValue(totalValue){(0,_jquery.default)("[data-groupname=staticgroup] [data-fieldtype=group]").get(0).innerHTML=totalValue}(0,_jquery.default)("body").on("change",(function(event){var defaultcustomcheckbox=(0,_jquery.default)('input[type=checkbox][name="name[customize]"]').get(0);null!==defaultcustomcheckbox&&null!==event.target&&event.target.id==defaultcustomcheckbox.id&&1==event.target.checked&&SetCustomSectionName()})),(0,_jquery.default)(document).ready((function(){var weighttype_singlemultiple=(0,_jquery.default)("#id_weighttype_singlemultiple").val();if("weighttype_singlemultiple_csv"==weighttype_singlemultiple)SetPreviewValue(CalculateCSVPreviewValue());else if("weighttype_singlemultiple_multiplier"==weighttype_singlemultiple){SetPreviewValue(CalculateMultiplierPreviewValue())}})),(0,_jquery.default)("form").on("submit",(function(){(0,_jquery.default)('[tag="id_sectionname"]').removeAttr("disabled"),(0,_jquery.default)("form :input").each((function(){1==this.disabled&&void 0!==this.attributes.value&&null!==this.attributes.value&&(this.disabled=!1,this.value=this.attributes.value.value,this.disabled=!0)}))})),(0,_jquery.default)(".select_name_type_option").on("change",(function(){SetCustomSectionName()})),(0,_jquery.default)("#id_weighttype_singlemultiple").on("change",(function(){var weighttype_singlemultiple=(0,_jquery.default)("#id_weighttype_singlemultiple").val();if("weighttype_singlemultiple_csv"==weighttype_singlemultiple)SetPreviewValue(CalculateCSVPreviewValue());else if("weighttype_singlemultiple_multiplier"==weighttype_singlemultiple){SetPreviewValue(CalculateMultiplierPreviewValue())}})),(0,_jquery.default)("#id_weighttype_multiplier_csvvalue").on("change",(function(){SetPreviewValue(CalculateCSVPreviewValue())})),(0,_jquery.default)(".class_weighttype_multiplier").on("change",(function(){SetPreviewValue(CalculateMultiplierPreviewValue())}))}}));

//# sourceMappingURL=editsection_form.min.js.map