define("format_compass/local/courseeditor/dndsection",["exports","core_courseformat/local/courseeditor/dndsection"],(function(_exports,_dndsection){var obj;
/**
   * Course index section component.
   *
   * This component is used to control specific course section interactions like drag and drop
   * in both course index and course content.
   *
   * @module     format_compass/local/courseeditor/dndsection
   * @class      format_compass/local/courseeditor/dndsection
   * @copyright  2023 KnowledgeOne
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_dndsection=(obj=_dndsection)&&obj.__esModule?obj:{default:obj};class _default extends _dndsection.default{configState(state){this.id=this.element.dataset.id,this.section=state.section.get(this.id),this.course=state.course,this.course_format_options=state.course_format_options}showDropZone(dropdata){if("assessmentscutoff"==this.sectionitem.id)"section"==dropdata.type&&(parseInt(this.course_format_options.assessmentscutoff)>dropdata.number?(this.sectionitem.element.classList.remove(this.classes.DROPUP),this.sectionitem.element.classList.add(this.classes.DROPDOWN)):(this.sectionitem.element.classList.add(this.classes.DROPUP),this.sectionitem.element.classList.remove(this.classes.DROPDOWN)));else{var _this$getLastCm;if("cm"==dropdata.type)null===(_this$getLastCm=this.getLastCm())||void 0===_this$getLastCm||_this$getLastCm.classList.add(this.classes.DROPDOWN);"section"==dropdata.type&&(this.section.number>dropdata.number?(this.element.classList.remove(this.classes.DROPUP),this.element.classList.add(this.classes.DROPDOWN)):(this.element.classList.add(this.classes.DROPUP),this.element.classList.remove(this.classes.DROPDOWN)))}}hideDropZone(){var _this$getLastCm2;null===(_this$getLastCm2=this.getLastCm())||void 0===_this$getLastCm2||_this$getLastCm2.classList.remove(this.classes.DROPDOWN),this.element.classList.remove(this.classes.DROPUP),this.element.classList.remove(this.classes.DROPDOWN),this.sectionitem.element.classList.remove(this.classes.DROPUP),this.sectionitem.element.classList.remove(this.classes.DROPDOWN)}drop(dropdata){let cutoffs,cutoff=parseInt(this.course_format_options.assessmentscutoff);if("assessmentscutoff"==this.sectionitem.id){if("section"==dropdata.type)if(dropdata.number==cutoff)this.reactive.dispatch("saveCutoffs",cutoff+1);else if(dropdata.number==cutoff-1)this.reactive.dispatch("saveCutoffs",cutoff-1);else if(dropdata.number<cutoff){let sectionid=this.course.sectionlist[cutoff-1];cutoffs=[{cutoff:[{assessment:cutoff-1}]}],this.reactive.dispatch("sectionMove",[dropdata.id],sectionid,cutoffs)}else if(dropdata.number>=cutoff){let sectionid=this.course.sectionlist[cutoff];cutoffs=[{cutoff:[{assessment:cutoff+1}]}],this.reactive.dispatch("sectionMove",[dropdata.id],sectionid,cutoffs)}}else"cm"==dropdata.type&&this.reactive.dispatch("cmMove",[dropdata.id],this.id),"section"==dropdata.type&&(this.course_format_options.hasassessments?(dropdata.number<cutoff&&this.section.number<cutoff&&this.reactive.dispatch("sectionMove",[dropdata.id],this.id),dropdata.number<cutoff&&this.section.number>=cutoff&&(cutoffs=[{cutoff:[{assessment:cutoff-1}]}],this.reactive.dispatch("sectionMove",[dropdata.id],this.id,cutoffs)),dropdata.number>=cutoff&&this.section.number>=cutoff&&this.reactive.dispatch("sectionMove",[dropdata.id],this.id),dropdata.number>=cutoff&&this.section.number<cutoff&&(cutoffs=[{cutoff:[{assessment:cutoff+1}]}],this.reactive.dispatch("sectionMove",[dropdata.id],this.id,cutoffs))):this.reactive.dispatch("sectionMove",[dropdata.id],this.id))}}return _exports.default=_default,_exports.default}));

//# sourceMappingURL=dndsection.min.js.map